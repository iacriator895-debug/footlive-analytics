// ===============================
// FOOTLIVE ANALYTICS - FASE 2
// ===============================

let events = [];

// Simulação de tempo (até integrarmos a API do YouTube)
function getCurrentVideoTime() {
    const now = new Date();
    return `${now.getMinutes()}:${String(now.getSeconds()).padStart(2, '0')}`;
}

// Captura cliques dos botões
document.addEventListener("click", function (e) {
    if (e.target.tagName === "BUTTON" && e.target.dataset.event) {
        const eventType = e.target.dataset.event;
        const team = e.target.dataset.team;
        const time = getCurrentVideoTime();

        const eventData = {
            team,
            eventType,
            time
        };

        events.push(eventData);
        renderEvent(eventData);
    }
});

// Renderiza evento na tela
function renderEvent(event) {
    let container = document.getElementById("eventContainer");

    if (!container) {
        container = document.createElement("div");
        container.id = "eventContainer";
        container.className = "container";
        document.body.appendChild(container);
    }

    const div = document.createElement("div");
    div.className = "card";
    div.innerHTML = `
        ⏱ ${event.time} — 
        <strong>Time ${event.team}</strong> :
        ${formatEventName(event.eventType)}
    `;

    container.prepend(div);
}

// Tradução amigável dos eventos
function formatEventName(type) {
    const map = {
        goal: "Gol",
        shot: "Finalização",
        foul: "Falta",
        yellow: "Cartão Amarelo",
        red: "Cartão Vermelho",
        corner: "Escanteio",
        cross: "Cruzamento",
        set_piece_corner: "Jogada Ensaiada (Escanteio)",
        goal_kick: "Tiro de Meta"
    };
    return map[type] || type;
}